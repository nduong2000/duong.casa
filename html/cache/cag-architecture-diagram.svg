<svg viewBox="0 0 900 600" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="900" height="600" fill="#f5f5f5" />
  
  <!-- Title -->
  <text x="450" y="40" font-family="Arial" font-size="24" font-weight="bold" text-anchor="middle">Cache Augmented Generation (CAG) System Architecture</text>
  
  <!-- Frontend Box -->
  <rect x="50" y="80" width="200" height="160" rx="10" fill="#e3f2fd" stroke="#1565c0" stroke-width="2" />
  <text x="150" y="100" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">Frontend</text>
  <rect x="70" y="110" width="160" height="40" rx="5" fill="#bbdefb" stroke="#1565c0" stroke-width="1" />
  <text x="150" y="135" font-family="Arial" font-size="14" text-anchor="middle">HTML/CSS Interface</text>
  <rect x="70" y="160" width="160" height="40" rx="5" fill="#bbdefb" stroke="#1565c0" stroke-width="1" />
  <text x="150" y="185" font-family="Arial" font-size="14" text-anchor="middle">JavaScript Client</text>
  
  <!-- API Server Box -->
  <rect x="350" y="80" width="200" height="380" rx="10" fill="#e8f5e9" stroke="#2e7d32" stroke-width="2" />
  <text x="450" y="100" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">API Server</text>
  
  <!-- API Components -->
  <rect x="370" y="120" width="160" height="40" rx="5" fill="#c8e6c9" stroke="#2e7d32" stroke-width="1" />
  <text x="450" y="145" font-family="Arial" font-size="14" text-anchor="middle">Flask Endpoints</text>
  
  <rect x="370" y="170" width="160" height="40" rx="5" fill="#c8e6c9" stroke="#2e7d32" stroke-width="1" />
  <text x="450" y="195" font-family="Arial" font-size="14" text-anchor="middle">Query Processor</text>
  
  <rect x="370" y="220" width="160" height="40" rx="5" fill="#c8e6c9" stroke="#2e7d32" stroke-width="1" />
  <text x="450" y="245" font-family="Arial" font-size="14" text-anchor="middle">Semantic Matching</text>
  
  <rect x="370" y="270" width="160" height="40" rx="5" fill="#c8e6c9" stroke="#2e7d32" stroke-width="1" />
  <text x="450" y="295" font-family="Arial" font-size="14" text-anchor="middle">Hybrid Retrieval</text>
  
  <rect x="370" y="320" width="160" height="40" rx="5" fill="#c8e6c9" stroke="#2e7d32" stroke-width="1" />
  <text x="450" y="345" font-family="Arial" font-size="14" text-anchor="middle">Query Transformation</text>
  
  <rect x="370" y="370" width="160" height="40" rx="5" fill="#c8e6c9" stroke="#2e7d32" stroke-width="1" />
  <text x="450" y="395" font-family="Arial" font-size="14" text-anchor="middle">Self-Reflection</text>
  
  <!-- LLM Box -->
  <rect x="650" y="80" width="200" height="110" rx="10" fill="#fff3e0" stroke="#e65100" stroke-width="2" />
  <text x="750" y="100" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">LLM</text>
  <rect x="670" y="110" width="160" height="40" rx="5" fill="#ffe0b2" stroke="#e65100" stroke-width="1" />
  <text x="750" y="135" font-family="Arial" font-size="14" text-anchor="middle">Ollama</text>
  <rect x="670" y="160" width="160" height="20" rx="5" fill="#ffe0b2" stroke="#e65100" stroke-width="1" />
  <text x="750" y="175" font-family="Arial" font-size="12" text-anchor="middle">phi4:14b</text>
  
  <!-- Vector Store Box -->
  <rect x="650" y="200" width="200" height="120" rx="10" fill="#e0f7fa" stroke="#006064" stroke-width="2" />
  <text x="750" y="220" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">Vector Database</text>
  <rect x="670" y="230" width="160" height="40" rx="5" fill="#b2ebf2" stroke="#006064" stroke-width="1" />
  <text x="750" y="255" font-family="Arial" font-size="14" text-anchor="middle">ChromaDB</text>
  <rect x="670" y="280" width="160" height="20" rx="5" fill="#b2ebf2" stroke="#006064" stroke-width="1" />
  <text x="750" y="295" font-family="Arial" font-size="12" text-anchor="middle">BGE-M3 Embeddings</text>
  
  <!-- Cache Box -->
  <rect x="650" y="330" width="200" height="230" rx="10" fill="#f3e5f5" stroke="#6a1b9a" stroke-width="2" />
  <text x="750" y="350" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">Caching System</text>
  
  <rect x="670" y="360" width="160" height="40" rx="5" fill="#e1bee7" stroke="#6a1b9a" stroke-width="1" />
  <text x="750" y="385" font-family="Arial" font-size="14" text-anchor="middle">Inference Cache (LRU)</text>
  
  <rect x="670" y="410" width="160" height="40" rx="5" fill="#e1bee7" stroke="#6a1b9a" stroke-width="1" />
  <text x="750" y="435" font-family="Arial" font-size="14" text-anchor="middle">Topic Preloading</text>
  
  <rect x="670" y="460" width="160" height="40" rx="5" fill="#e1bee7" stroke="#6a1b9a" stroke-width="1" />
  <text x="750" y="485" font-family="Arial" font-size="14" text-anchor="middle">Semantic Matching</text>
  
  <rect x="670" y="510" width="160" height="40" rx="5" fill="#e1bee7" stroke="#6a1b9a" stroke-width="1" />
  <text x="750" y="535" font-family="Arial" font-size="14" text-anchor="middle">Persistent Storage</text>
  
  <!-- Document System Box -->
  <rect x="50" y="340" width="200" height="120" rx="10" fill="#ffebee" stroke="#b71c1c" stroke-width="2" />
  <text x="150" y="360" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">Document System</text>
  <rect x="70" y="370" width="160" height="40" rx="5" fill="#ffcdd2" stroke="#b71c1c" stroke-width="1" />
  <text x="150" y="395" font-family="Arial" font-size="14" text-anchor="middle">Document Storage</text>
  <rect x="70" y="420" width="160" height="30" rx="5" fill="#ffcdd2" stroke="#b71c1c" stroke-width="1" />
  <text x="150" y="440" font-family="Arial" font-size="12" text-anchor="middle">PDF, DOCX, HTML, etc.</text>
  
  <!-- Connections -->
  <!-- Frontend to API -->
  <line x1="250" y1="160" x2="350" y2="160" stroke="#1e88e5" stroke-width="3" stroke-dasharray="5,5" />
  <polygon points="340,155 350,160 340,165" fill="#1e88e5" />
  
  <!-- API to LLM -->
  <line x1="550" y1="140" x2="650" y2="140" stroke="#e65100" stroke-width="3" stroke-dasharray="5,5" />
  <polygon points="640,135 650,140 640,145" fill="#e65100" />
  
  <!-- API to Vector DB -->
  <line x1="550" y1="250" x2="650" y2="250" stroke="#006064" stroke-width="3" stroke-dasharray="5,5" />
  <polygon points="640,245 650,250 640,255" fill="#006064" />
  
  <!-- API to Cache -->
  <line x1="550" y1="400" x2="650" y2="400" stroke="#6a1b9a" stroke-width="3" stroke-dasharray="5,5" />
  <polygon points="640,395 650,400 640,405" fill="#6a1b9a" />
  
  <!-- Documents to API -->
  <line x1="250" y1="400" x2="350" y2="400" stroke="#b71c1c" stroke-width="3" stroke-dasharray="5,5" />
  <polygon points="340,395 350,400 340,405" fill="#b71c1c" />
  
  <!-- Legend -->
  <rect x="50" y="520" width="200" height="70" rx="5" fill="white" stroke="#333" stroke-width="1" />
  <text x="150" y="535" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Legend</text>
  
  <line x1="60" y1="550" x2="80" y2="550" stroke="#1e88e5" stroke-width="3" stroke-dasharray="5,5" />
  <text x="170" y="555" font-family="Arial" font-size="12" text-anchor="middle">Data Flow</text>
  
  <rect x="60" y="565" width="15" height="15" rx="2" fill="#e1bee7" stroke="#6a1b9a" stroke-width="1" />
  <text x="170" y="575" font-family="Arial" font-size="12" text-anchor="middle">System Component</text>
</svg>
